<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <!-- Page Title -->
    <title>IRCL - Idaho Robot Combat League</title>

    <!-- Meta Keywords and Description -->
    <meta name="keywords" content="combat robotics, Idaho, robot combat, IRCL, events, workshops">
    <meta name="description" content="Idaho Robot Combat League hosts combat robotics events and workshops across the Treasure Valley. Join our community, learn, compete, and support STEM in Idaho.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <!-- Favicon -->
    <link rel="shortcut icon" href="./images/favicon.ico" title="Favicon">
        
    <!-- Main CSS Files -->
    <link rel="stylesheet" href="style.css">

    <!-- Namari Color CSS -->
    <link rel="stylesheet" href="./css/color.css">
    <!-- IRCL custom styles -->
    <link rel="stylesheet" href="./css/custom.css">

    <!-- Icon Fonts - Font Awesome Icons (v5) -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <!-- Animate CSS -->
    <link href="./css/animate.css" rel="stylesheet" type="text/css">

    <!-- Open Graph / Twitter -->
    <link rel="canonical" href="https://ircl-io.github.io/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="IRCL - Idaho Robot Combat League">
    <meta property="og:description" content="Idaho Robot Combat League hosts combat robotics events and workshops across the Treasure Valley. Join our community, learn, compete, and support STEM in Idaho.">
    <meta property="og:url" content="https://ircl-io.github.io/">
    <meta property="og:image" content="https://ircl-io.github.io/images/IRCL_logo_Transparent.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="IRCL - Idaho Robot Combat League">
    <meta name="twitter:description" content="Idaho Robot Combat League hosts combat robotics events and workshops across the Treasure Valley. Join our community, learn, compete, and support STEM in Idaho.">
    <meta name="twitter:image" content="https://ircl-io.github.io/images/IRCL_logo_Transparent.png">

    <!-- Google Webfonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Preloader -->
<div id="preloader">
    <div id="status" class="la-ball-triangle-path" style="left: 50%; top: 50%">
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
<!--End of Preloader-->

<div class="page-border" data-wow-duration="0.7s" data-wow-delay="0.2s">
    <div class="top-border wow fadeInDown animated" style="visibility: visible; animation-name: fadeInDown;"></div>
    <div class="right-border wow fadeInRight animated" style="visibility: visible; animation-name: fadeInRight;"></div>
    <div class="bottom-border wow fadeInUp animated" style="visibility: visible; animation-name: fadeInUp;"></div>
    <div class="left-border wow fadeInLeft animated" style="visibility: visible; animation-name: fadeInLeft;"></div>
</div>

<div id="wrapper">

    <header id="banner" class="scrollto clearfix" data-enllax-ratio=".5">
        <div id="header" class="nav-collapse">
            <div class="row clearfix">
                <div class="col-1">

                    <!--Logo-->
                    <div id="logo">

                        <!--Logo that is shown on the banner-->
                        <img src="./images/IRCL_Graphic.jpg" id="banner-logo" alt="Landing Page"/>
                        <!--End of Banner Logo-->

                        <!--The Logo that is shown on the sticky Navigation Bar-->
                        <img src="./images/IRCL.jpg" id="navigation-logo" alt="Landing Page"/>
                        <!--End of Navigation Logo-->

                    </div>
                    <!--End of Logo-->

                    <aside>

                        <!--Social Icons in Header-->
                        <ul class="social-icons">
                            <li>
                                <a target="_blank" rel="noopener noreferrer" title="Facebook" href="https://www.facebook.com/groups/3329951360635273/?_rdr">
                                    <i class="fab fa-facebook fa-1x"></i><span>Facebook</span>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" rel="noopener noreferrer" title="Discord" href="https://discord.com/invite/NwgPEAYwya">
                                    <i class="fab fa-discord fa-1x"></i><span>Discord</span>
                                </a>
                            </li>
                        </ul>
                        <!--End of Social Icons in Header-->

                    </aside>

                    <!--Main Navigation-->
                    <nav id="nav-main">
                        <ul>
                            <li>
                                <a href="#banner">Home</a>
                            </li>
                            <li>
                                <a href="#tvevents">Events</a>
                            </li>
                            <li>
                                <a href="#gallery">Gallery</a>
                            </li>
                            <li>
                                <a href="#news">News</a>
                            </li>
                            <!-- <li>
                                <a href="#merchandise">Merchandise</a>
                            </li> -->
                            <li>
                                <a href="#faqs">FAQs</a>
                            </li>
                            
                            <li>
                                <a href="#external">External Links</a>
                            </li>


                        </ul>
                    </nav>
                    <!--End of Main Navigation-->

                    <div id="nav-trigger"><span></span></div>
                    <nav id="nav-mobile"></nav>

                </div>
            </div>
        </div><!--End of Header-->

        <!--Banner Content-->
        <div id="banner-content" class="row clearfix">

            <div class="col-1 hero-wrapper">
                <div class="hero-content">
                    <div class="hero-copy">
                        <h1>IDAHO ROBOT COMBAT LEAGUE</h1>
                        <!-- <img src="images/IRCL_logo_Transparent.png" alt="IRCL logo" width="80%" loading="lazy"> -->
                        <p class="hero-subtitle">We are a 501(c)3 community non-profit dedicated to educational workshops and combat robotics competitions throughout Idaho's Treasure Valley.</p>
             
                    </div>
                    <div class="hero-panels">
                        <aside class="hero-highlight">
                            
                            <div class="hero-highlight-body">
                                <img src="./images/IRCL_SBB2026-2.jpg" alt="Spring Bot Breaker 2026 flyer" loading="lazy">
                                <h3>Spring Bot Breaker 2026</h3>
                                <p class="hero-highlight-meta">Mar 28, 2026 &bull; 10:30am &bull; ABU Games</p>
                                <p>Full-combat antweight and beetleweight brackets. Free spectators, trophies and prizes.</p>
                                <div class="hero-highlight-actions">
                                    <a href="https://www.robotcombatevents.com/events/6479" target="_blank" rel="noopener noreferrer" class="button button-light"><i class="fa fa-robot"></i> Register on RCE</a>
                                    <a href="./events/Spring Bot Breaker 2026.html" class="button button-outline"><i class="fa fa-info-circle"></i> Event Details</a>
                                </div>
                            </div>
                        </aside>
                        <aside class="hero-ttdb" data-ttdb-panel="ttdb-globe">
                            <div class="hero-ttdb-globe">
                                <canvas id="ttdb-globe-canvas" aria-label="TTDB globe view" role="img"></canvas>
                            </div>
                        </aside>
                    </div>
                </div>
            </div>
        </div><!--End of Row-->
</header>

    <!--Main Content Area-->
    <main id="content">

        <!--Introduction-->
        <section id="tvevents" class="introduction scrollto">
            <div class="row clearfix">
                <div class="col-1 events-section">
                    <div class="section-heading">
                        <h3>TREASURE VALLEY EVENTS</h3>
                    </div>
                    <div id="eventCards" class="event-cards">
                        
                        
                        <a class="event-card" href="events/Spring Bot Breaker 2026.html">
                            <img src="images/IRCL_SBB2026-2.jpg" alt="Spring Bot Breaker 2026 flyer" loading="lazy">
                            <div class="event-card-body">
                                <h4>Spring Bot Breaker 2026</h4>
                                <p class="event-meta">Mar 28, 2026 &bull; ABU Games</p>
                            </div>
                        </a>
                        <a class="event-card" href="events/WORKSHOP.html">
                            <img src="events/9VOLT.png" alt="Robot Build Workshop preview" loading="lazy">
                            <div class="event-card-body">
                                <h4>Robot Build Workshop</h4>
                                <p class="event-meta">Jan 17, 2026 &bull; 11am-4pm &bull; ABU Games</p>
                            </div>
                        </a>
                        <a class="event-card" href="events/Bot Oblivion 2025.html">
                            <img src="images/BotOblivion2025.png" alt="IRCL logo" loading="lazy">
                            <div class="event-card-body">
                                <h4>Bot Oblivion 2025</h4>
                                <p class="event-meta">July 19, 2025 Gem State Gaming Convention, Boise area. Beetles! 3-lb, full-combat and plastic 1-lb ant robots.</p>
                            </div>
                        </a>
                        <a class="event-card" href="events/Spring Bot Breaker 2025.html">
                            <img src="https://img.youtube.com/vi/4E-GoIVSqRU/hqdefault.jpg" alt="IRCL logo" loading="lazy">
                            <div class="event-card-body">
                                <h4>Spring Bot Breaker 2025</h4>
                                <p class="event-meta">March 29, 2025 ABU Games, Boise. Full-combat and plastic 1-lb ant robots.</p>
                            </div>
                        </a>
                        <a class="event-card" href="events/Antmageddon 2024.html">
                            <img src="images/IRCL_logo_Transparent.png" alt="IRCL logo" loading="lazy">
                            <div class="event-card-body">
                                <h4>Antmageddon 2024</h4>
                                <p class="event-meta">November 23, 2024 ABU Games, Boise. Antweight & plastic antweight tournament.</p>
                            </div>
                        </a>
                        <div class="event-card" >
                            <img src="images/IRCL_logo_Transparent.png" alt="IRCL logo" loading="lazy">
                            <div class="event-card-body">
                                <h4>King of the Ant Hill 2024</h4>
                                <p class="event-meta">July 20, 2024 Gem State Gaming Convention - Expo Idaho. IRCLs first event.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>


        </section>
        <!--End of Introduction-->


        <!--Gallery-->
        <aside id="gallery" class="row text-center scrollto clearfix" data-featherlight-gallery
                 data-featherlight-filter="a">

                <a href="./images/gallery-images/gallery-image-1.jpg" data-featherlight="image" class="col-3 wow fadeIn"
                   data-wow-delay="0.1s"><img src="images/gallery-images/gallery-image-1.jpg" alt="IRCL gallery image 1" loading="lazy"/></a>
                <a href="./images/gallery-images/gallery-image-2.jpg" data-featherlight="image" class="col-3 wow fadeIn"
                   data-wow-delay="0.3s"><img src="images/gallery-images/gallery-image-2.jpg" alt="IRCL gallery image 2" loading="lazy"/></a>
                <a href="./images/gallery-images/gallery-image-3.jpg" data-featherlight="image" class="col-3 wow fadeIn"
                   data-wow-delay="0.5s"><img src="images/gallery-images/gallery-image-3.jpg" alt="IRCL gallery image 3" loading="lazy"/></a>
                <a href="./images/gallery-images/gallery-image-4.jpg" data-featherlight="image" class="col-3 wow fadeIn"
                   data-wow-delay="1.1s"><img src="images/gallery-images/gallery-image-4.jpg" alt="IRCL gallery image 4" loading="lazy"/></a>
                <a href="./images/gallery-images/gallery-image-5.jpg" data-featherlight="image" class="col-3 wow fadeIn"
                   data-wow-delay="0.9s"><img src="images/gallery-images/gallery-image-5.jpg" alt="IRCL gallery image 5" loading="lazy"/></a>
                <a href="./images/gallery-images/gallery-image-6.jpg" data-featherlight="image" class="col-3 wow fadeIn"
                   data-wow-delay="0.7s"><img src="images/gallery-images/gallery-image-6.jpg" alt="IRCL gallery image 6" loading="lazy"/></a>

        </aside>
        <!--End of Gallery-->


        <!--Content Section-->
        <div id="news" class="scrollto clearfix">

            <div class="row no-padding-bottom clearfix">


                <!--Content Left Side-->
                <div class="col-3">
                    <!--Message from the Owner-->
                    <blockquote class="testimonial text-right bigtest">
                        <q id="quotible">Art of war</q>

                        <footer>- Sun Tzu, The Art of War</footer>
                        
                    </blockquote>
                    <!-- End of Testimonial-->

                </div>
                <!--End Content Left Side-->

                <!--Content of the Right Side-->
                <div class="col-3">
                    <div class="section-heading">
                        
                    </div>
                    
                    <p>
                        Just Cuz Robotics, run by Seth Schaffer, has released a new WEKA dual 20A brushed ESC with some pretty nifty features,
                        aside from its incredibly compact size. With a few simple steps, this little guy can actually detect your inputs and program
                        its own mixing! Check out his great video on it here:
                     </p>
                    <p><a target="_blank" rel="noopener noreferrer" title="The Heart of the Best Driving Bots: WEKA Intro and User Guide" href="https://www.youtube.com/watch?v=nK85cw2gmbU" class="button"><i class="fa fa-user" aria-hidden="true"></i>  WEKA User Guide </a>
                    </p>
                </div>
                <!--End Content Right Side-->

                <div class="col-3">
                    <img class="content-logo" src="./images/IRCL_logo_Transparent.png" alt="IRCL"/>
                </div>

            </div>


        </div>

<section id="faqs" class="scrollto clearfix">
    <div class="row clearfix">

        <div class="col-3">
            <div class="section-heading">
                <h3>FAQs</h3>
                <h2 class="section-title">Frequently Asked Questions</h2>
                <p class="section-subtitle">Everybody starts out with various questions about combat robotics, lets answer some of those questions for you here.</p>
                <input type="text" id="searchInput" placeholder="Search FAQs..." />
            </div>
        </div>

        <div class="col-2-3">
            <!-- FAQ items -->
            <div class="faq-item">
                <a class="col-3" data-faq="What Materials Should I Use?" onclick="showFAQ(this, 'answer1')">
                    <img src="./images/company-images/company-logo1.png" alt="What Materials Should I Use?" />
                    <div class="client-overlay">
                        <span class="faq-answer">What Materials Should I Use?</span>
                    </div>
                </a>
            </div>

            <div class="faq-item">
                <a class="col-3" data-faq="How Much Does it Cost?" onclick="showFAQ(this, 'answer2')">
                    <img src="./images/company-images/company-logo2.png" alt="How Much Does it Cost?" />
                    <div class="client-overlay">
                        <span class="faq-answer">How Much Does it Cost?</span>
                    </div>
                </a>
            </div>

            <div class="faq-item">
                <a class="col-3" data-faq="What are the Rules?" onclick="showFAQ(this, 'answer3')">
                    <img src="./images/company-images/company-logo3.png" alt="What are the Rules?" />
                    <div class="client-overlay">
                        <span class="faq-answer">What are the Rules?</span>
                    </div>
                </a>
            </div>

            <div class="faq-item">
                <a class="col-3" data-faq="Who Can Fight?" onclick="showFAQ(this, 'answer4')">
                    <img src="./images/company-images/company-logo4.png" alt="Who Can Fight?" />
                    <div class="client-overlay">
                        <span class="faq-answer">Who Can Fight?</span>
                    </div>
                </a>
            </div>

            <div class="faq-item">
                <a class="col-3" data-faq="Where Do We Fight?" onclick="showFAQ(this, 'answer5')">
                    <img src="./images/company-images/company-logo5.png" alt="Where Do We Fight?" />
                    <div class="client-overlay">
                        <span class="faq-answer">Where Do We Fight?</span>
                    </div>
                </a>
            </div>

            <div class="faq-item">
                <a class="col-3" data-faq="How Often Do Fights Happen?" onclick="showFAQ(this, 'answer6')">
                    <img src="./images/company-images/company-logo6.png" alt="How Often Do Fights Happen?" />
                    <div class="client-overlay">
                        <span class="faq-answer">How Often Do Fights Happen?</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>
        <!--End of FAQs-->

    		<section id="external" class="secondary-color text-center scrollto clearfix ">
			<div class="row clearfix">
				<div class="section-heading">
				<h2 class="section-title">External Links</h2>
				</div>
				<p>Event Registration:</p>
				<p><a href="https://www.robotcombatevents.com" target="_blank" rel="noopener noreferrer">Robot Combat Events</a></p>
				<hr>
				<p>Rules</p>
				<p><a href="https://sparc.tools/" target="_blank" rel="noopener noreferrer">SPARC Ruleset</a></p>
				<hr>
				<p>Robot Designs:</p>
				<p><a href="https://teammalice.com/index.php/scar-kit-and-spares/scar-plastic-antweight-electronics-kit/" target="_blank" rel="noopener noreferrer">Team Malice Plastic Antweight Designs</a></p>
				<hr>
				<p>Robot Parts:</p>
				<p><a href="https://www.repeat-robotics.com" target="_blank" rel="noopener noreferrer">Repeat Robotics</a></p>
				<p><a href="https://www.justcuzrobotics.com" target="_blank" rel="noopener noreferrer">Just 'Cuz Robotics</a></p>
				<p><a href="https://www.palmbeachbots.com" target="_blank" rel="noopener noreferrer">Palm Beach Bots</a></p>
				<hr>
				<p>Friends of IRCL</p>
				<p><a href="https://www.facebook.com/UtahCombatRobotics/" target="_blank" rel="noopener noreferrer">Utah Combat Robotics (UCR)</a></p>
				<p><a href="https://crimsonrobotics.com/" target="_blank" rel="noopener noreferrer">Crimson Robotics</a></p>
				<p><a href="http://azroboticcombat.com/" target="_blank" rel="noopener noreferrer">Arizona Robotic Combat (ARC)</a></p>
			</div>
		</section>
        

    </main>
    <!--End Main Content Area-->


    <!--Footer-->
    <footer id="landing-footer" class="clearfix">
        <div class="row clearfix">

            <p id="copyright" class="col-2">Site created for <a href="https://ircl-io.github.io/">Idaho Robot Combat League</a></p>

            <!--Social Icons in Footer-->
            <ul class="col-2 social-icons">
                <li>
                    <a target="_blank" rel="noopener noreferrer" title="Facebook" href="https://www.facebook.com/groups/3329951360635273/?_rdr">
                        <i class="fab fa-facebook fa-1x"></i><span>Facebook</span>
                    </a>
                </li>
                <li>
                    <a target="_blank" rel="noopener noreferrer" title="Discord" href="https://discord.com/invite/NwgPEAYwya">
                        <i class="fab fa-discord fa-1x"></i><span>Discord</span>
                    </a>
                </li>
            </ul>
            <!--End of Social Icons in Footer-->
        </div>
    </footer>
    <!--End of Footer-->

</div>

<!-- Include JavaScript resources-->
<script src="js/jquery.1.8.3.min.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/featherlight.min.js"></script>
<script src="js/featherlight.gallery.min.js"></script>
<script src="js/jquery.enllax.min.js"></script>
<script src="js/jquery.scrollUp.min.js"></script>
<script src="js/jquery.easing.min.js"></script>
<script src="js/jquery.stickyNavbar.min.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/images-loaded.min.js"></script>
<script src="js/lightbox.min.js"></script>
<script src="js/site.js"></script>
<script src="js/quote.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const panel = document.querySelector('[data-ttdb-panel="ttdb-globe"]');
    if (!panel) {
        return;
    }
    const statusEl = document.getElementById("ttdb-globe-status");
    const selectionEl = document.getElementById("ttdb-globe-selection");
    const globeCanvas = document.getElementById("ttdb-globe-canvas");
    if (!globeCanvas) {
        return;
    }
    const TTDB_PATHS = [
        "/cards/cards/IRCL_TTDB.md",
        "/cards/IRCL_TTDB.md",
        "cards/cards/IRCL_TTDB.md",
        "cards/IRCL_TTDB.md"
    ];
    const ANIMATION_MS = 16;
    const CYCLE_STEP_MS = 3000;
    const SELECT_SCALE_EXP = 4.0;
    const BASE_SCALE = 0.10;
    const GLOBE_ZOOM_MIN = 0.7;
    const GLOBE_ZOOM_MAX = 1.35;
    const DRAG_SENSITIVITY = 0.005;
    const DRAG_THRESHOLD = 6;
    const DRAG_LAT_LIMIT = Math.PI / 2 - 0.08;
    let records = {};
    let order = [];
    let coords = {};
    let selectedId = null;
    let globeRotLat = 0;
    let globeRotLon = 0;
    let globeTargetLat = 0;
    let globeTargetLon = 0;
    let globeAnimating = false;
    let globeItems = [];
    let ttdbBase = "cards/cards/";
    let cycleAfterId = null;
    let cycleList = [];
    let cycleIndex = 0;
    let cycleSourceId = null;
    let eventId = null;
    let labelScaleStart = 0;
    let labelScaleUntil = 0;
    let userInteracted = false;
    let globeZoom = 1;
    let dragActive = false;
    let dragPointerId = null;
    let dragStartX = 0;
    let dragStartY = 0;
    let dragLastX = 0;
    let dragLastY = 0;
    let dragStartedAt = 0;
    let suppressClickUntil = 0;
    const imageCache = new Map();

    const setStatus = (text) => {
        if (statusEl) {
            statusEl.textContent = text;
        }
    };

    const setSelection = (text) => {
        if (selectionEl) {
            selectionEl.textContent = text;
        }
    };

    const extractFieldValue = (body, fieldNames) => {
        if (!body) {
            return null;
        }
        const pattern = fieldNames.map((name) => name.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")).join("|");
        const regex = new RegExp(`^\\s*-\\s*(${pattern})\\s*:\\s*(.+)$`, "i");
        for (const line of body.split(/\r?\n/)) {
            const match = line.match(regex);
            if (match) {
                return match[2].trim();
            }
        }
        return null;
    };

    const extractCardImage = (body) => {
        const value = extractFieldValue(body, ["Card image", "Image"]);
        if (value) {
            const mdMatch = value.match(/!\[[^\]]*\]\(([^)]+)\)/);
            if (mdMatch) {
                return mdMatch[1].trim();
            }
            return value.trim();
        }
        const mdMatch = body.match(/!\[[^\]]*\]\(([^)]+)\)/);
        if (mdMatch) {
            return mdMatch[1].trim();
        }
        return null;
    };

    const resolveImagePath = (imageRef) => {
        if (!imageRef) {
            return null;
        }
        if (imageRef.startsWith("http://") || imageRef.startsWith("https://")) {
            return imageRef;
        }
        if (imageRef.startsWith("/")) {
            return imageRef;
        }
        return `${ttdbBase}${imageRef.replace(/^\.?\//, "")}`;
    };

    const getImage = (imageRef) => {
        const resolved = resolveImagePath(imageRef);
        if (!resolved) {
            return null;
        }
        if (imageCache.has(resolved)) {
            return imageCache.get(resolved);
        }
        const img = new Image();
        img.onload = () => {
            imageCache.set(resolved, img);
            renderGlobe();
        };
        img.onerror = () => {
            imageCache.set(resolved, null);
            renderGlobe();
        };
        imageCache.set(resolved, img);
        img.src = resolved;
        return img;
    };

    const parseDbRecords = (content) => {
        let selected = null;
        const cursorMatch = content.match(/```cursor([\s\S]*?)```/);
        if (cursorMatch) {
            let inSelected = false;
            for (const line of cursorMatch[1].split(/\r?\n/)) {
                const stripped = line.trim();
                if (stripped.startsWith("selected:")) {
                    inSelected = true;
                    continue;
                }
                if (inSelected) {
                    const itemMatch = stripped.match(/^-\s*(\S+)/);
                    if (itemMatch) {
                        selected = itemMatch[1];
                        break;
                    }
                    if (stripped && !stripped.startsWith("-")) {
                        break;
                    }
                }
            }
        }

        const outRecords = {};
        const outOrder = [];
        const outCoords = {};

        const blocks = content.split(/\n\s*---+\s*\n/);
        for (const block of blocks) {
            const lines = block.split(/\r?\n/).map((line) => line.replace(/\n$/, ""));
            let headerIndex = -1;
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].startsWith("@")) {
                    headerIndex = i;
                    break;
                }
            }
            if (headerIndex === -1) {
                continue;
            }
            const headerLine = lines[headerIndex].trim();
            const recordId = headerLine.split(/\s+/)[0];
            const body = lines.slice(headerIndex + 1).join("\n").replace(/^\n+|\n+$/g, "");

            let title = null;
            for (const line of body.split(/\r?\n/)) {
                const match = line.match(/^##\s+(.*)$/);
                if (match) {
                    title = match[1].trim();
                    break;
                }
            }

            const edges = [];
            const relatesMatch = headerLine.match(/relates:([^|]+)/);
            if (relatesMatch) {
                for (const tokenRaw of relatesMatch[1].split(",")) {
                    const token = tokenRaw.trim();
                    if (!token) {
                        continue;
                    }
                    let edgeType = "relates";
                    let target = token;
                    if (token.includes(">")) {
                        const parts = token.split(">", 2);
                        edgeType = parts[0].trim();
                        target = parts[1].trim();
                    }
                    edges.push({ type: edgeType, target });
                }
            }

            const coordMatch = recordId.match(/@LAT(-?\d+(?:\.\d+)?)LON(-?\d+(?:\.\d+)?)/);
            if (coordMatch) {
                outCoords[recordId] = [parseFloat(coordMatch[1]), parseFloat(coordMatch[2])];
            }

            const cardImage = extractCardImage(body);
            const url = extractFieldValue(body, ["URL"]);

            outRecords[recordId] = { header: headerLine, body, title, edges, cardImage, url };
            outOrder.push(recordId);
        }

        return { records: outRecords, order: outOrder, selected, coords: outCoords };
    };

    const setHeader = () => {
        if (!selectedId || !records[selectedId]) {
            setSelection("No record selected");
            return;
        }
        const title = records[selectedId].title;
        setSelection(title ? `Selected: ${title}` : `Selected: ${selectedId}`);
    };

    const selectRecord = (recordId, options = {}) => {
        const { fromCycle = false } = options;
        if (!recordId || !records[recordId]) {
            return;
        }
        selectedId = recordId;
        if (fromCycle) {
            const now = Date.now();
            labelScaleStart = now;
            labelScaleUntil = now + CYCLE_STEP_MS;
        }
        setHeader();
        centerOnSelected();
        renderGlobe();
        if (!fromCycle) {
            scheduleCycleFromEvent();
        }
    };

    function getEventBots(sourceId) {
        if (!sourceId || !records[sourceId]) {
            return [];
        }
        const edges = records[sourceId].edges || [];
        return edges
            .filter((edge) => edge.type === "has_bot" && records[edge.target])
            .map((edge) => edge.target);
    }

    const updateFromContent = (content) => {
        if (content.startsWith("File not found:") || content.startsWith("TypeError")) {
            records = {};
            order = [];
            coords = {};
            selectedId = null;
            imageCache.clear();
            cancelCycle();
            setStatus("TTDB not reachable");
            setSelection("Check back soon");
            renderGlobe();
            return;
        }
        const parsed = parseDbRecords(content);
        records = parsed.records;
        order = parsed.order;
        coords = parsed.coords;
        imageCache.clear();
        const candidateEvent = parsed.selected && records[parsed.selected] ? parsed.selected : null;
        const candidateBots = candidateEvent ? getEventBots(candidateEvent) : [];
        eventId = candidateBots.length ? candidateEvent : null;
        const eventBots = eventId ? candidateBots : [];
        if (!records[selectedId] || (eventBots.length && !eventBots.includes(selectedId))) {
            selectedId = eventBots.length ? eventBots[0] : parsed.selected || (order.length ? order[0] : null);
        }
        setStatus(order.length ? `Records: ${order.length}` : "No records found");
        setHeader();
        centerOnSelected();
        renderGlobe();
        scheduleCycleFromEvent();
    };

    const fetchTtdbContent = async () => {
        for (const path of TTDB_PATHS) {
            try {
                const res = await fetch(path, { cache: "no-store" });
                if (!res.ok) {
                    continue;
                }
                ttdbBase = path.slice(0, path.lastIndexOf("/") + 1);
                return await res.text();
            } catch (err) {
                continue;
            }
        }
        throw new Error("TTDB fetch failed");
    };

    const refreshAll = () => {
        fetchTtdbContent()
            .then(updateFromContent)
            .catch(() => {
                cancelCycle();
                setStatus("TTDB not reachable");
                setSelection("Check back soon");
            });
    };

    const scheduleCycleFromEvent = () => {
        cancelCycle();
        if (userInteracted) {
            return;
        }
        if (!eventId) {
            return;
        }
        const bots = getEventBots(eventId);
        if (!bots.length) {
            return;
        }
        cycleSourceId = eventId;
        cycleList = bots;
        cycleIndex = 0;
        cycleAfterId = window.setTimeout(cycleStep, CYCLE_STEP_MS);
    };

    const cancelCycle = () => {
        if (cycleAfterId) {
            window.clearTimeout(cycleAfterId);
        }
        cycleAfterId = null;
        cycleList = [];
        cycleIndex = 0;
        cycleSourceId = null;
    };

    const cycleStep = () => {
        if (!cycleList.length || !cycleSourceId) {
            cancelCycle();
            return;
        }
        const recordId = cycleList[cycleIndex];
        cycleIndex = (cycleIndex + 1) % cycleList.length;
        if (records[recordId]) {
            selectRecord(recordId, { fromCycle: true });
        }
        cycleAfterId = window.setTimeout(cycleStep, CYCLE_STEP_MS);
    };

    const centerOnSelected = () => {
        if (!selectedId) {
            return;
        }
        const coord = coords[selectedId];
        if (!coord) {
            return;
        }
        const [lat, lon] = coord;
        const latR = (lat * Math.PI) / 180;
        const lonR = (lon * Math.PI) / 180;
        const x = Math.cos(latR) * Math.sin(lonR);
        const y = Math.sin(latR);
        const z = Math.cos(latR) * Math.cos(lonR);
        const rotLon = -Math.atan2(x, z);
        const z1 = Math.hypot(x, z);
        const rotLat = Math.atan2(y, z1);
        globeTargetLat = rotLat;
        globeTargetLon = rotLon;
        if (!globeAnimating) {
            globeAnimating = true;
            window.setTimeout(animateGlobe, ANIMATION_MS);
        }
    };

    const angleDelta = (target, current) => {
        let delta = target - current;
        while (delta > Math.PI) {
            delta -= 2 * Math.PI;
        }
        while (delta < -Math.PI) {
            delta += 2 * Math.PI;
        }
        return delta;
    };

    const animateGlobe = () => {
        if (!globeAnimating) {
            return;
        }
        const deltaLat = angleDelta(globeTargetLat, globeRotLat);
        const deltaLon = angleDelta(globeTargetLon, globeRotLon);
        if (Math.abs(deltaLat) < 0.002 && Math.abs(deltaLon) < 0.002) {
            globeRotLat = globeTargetLat;
            globeRotLon = globeTargetLon;
            globeAnimating = false;
            renderGlobe();
            return;
        }
        globeRotLat += deltaLat * 0.15;
        globeRotLon += deltaLon * 0.15;
        renderGlobe();
        window.setTimeout(animateGlobe, ANIMATION_MS);
    };

    const projectPoint = (lat, lon) => {
        const latR = (lat * Math.PI) / 180;
        const lonR = (lon * Math.PI) / 180;
        let x = Math.cos(latR) * Math.sin(lonR);
        let y = Math.sin(latR);
        let z = Math.cos(latR) * Math.cos(lonR);

        const cosY = Math.cos(globeRotLon);
        const sinY = Math.sin(globeRotLon);
        const x1 = x * cosY + z * sinY;
        const z1 = -x * sinY + z * cosY;

        const cosX = Math.cos(globeRotLat);
        const sinX = Math.sin(globeRotLat);
        const y1 = y * cosX - z1 * sinX;
        const z2 = y * sinX + z1 * cosX;

        return [x1, y1, z2];
    };

    const drawGraticule = (ctx, cx, cy, radius) => {
        const drawVisibleLine = (points) => {
            let line = [];
            for (const [px, py, visible] of points) {
                if (visible) {
                    line.push([px, py]);
                } else if (line.length) {
                    if (line.length >= 2) {
                        drawLine(line);
                    }
                    line = [];
                }
            }
            if (line.length >= 2) {
                drawLine(line);
            }
        };

        const drawLine = (points) => {
            ctx.beginPath();
            ctx.strokeStyle = "#1a1f2a";
            ctx.lineWidth = 1;
            ctx.moveTo(points[0][0], points[0][1]);
            for (let i = 1; i < points.length; i++) {
                ctx.lineTo(points[i][0], points[i][1]);
            }
            ctx.stroke();
        };

        for (let lon = -150; lon < 180; lon += 30) {
            const points = [];
            for (let lat = -90; lat <= 90; lat += 6) {
                const [x, y, z] = projectPoint(lat, lon);
                if (z > 0) {
                    points.push([cx + x * radius, cy - y * radius, true]);
                } else {
                    points.push([0, 0, false]);
                }
            }
            drawVisibleLine(points);
        }

        for (let lat = -60; lat < 90; lat += 30) {
            const points = [];
            for (let lon = -180; lon <= 180; lon += 6) {
                const [x, y, z] = projectPoint(lat, lon);
                if (z > 0) {
                    points.push([cx + x * radius, cy - y * radius, true]);
                } else {
                    points.push([0, 0, false]);
                }
            }
            drawVisibleLine(points);
        }
    };

    const renderGlobe = () => {
        if (!globeCanvas) {
            return;
        }
        const ctx = globeCanvas.getContext("2d");
        const rect = globeCanvas.getBoundingClientRect();
        const width = Math.max(rect.width, 200);
        const height = Math.max(rect.height, 200);
        globeCanvas.width = width;
        globeCanvas.height = height;
        ctx.clearRect(0, 0, width, height);

        globeItems = [];

        const padding = 6;
        const baseRadius = Math.min(width, height) / 2 - padding;
        const radius = baseRadius * globeZoom;
        if (radius <= 10) {
            return;
        }

        const cx = width / 2;
        const cy = height / 2;

        ctx.fillStyle = "#0e1117";
        ctx.strokeStyle = "#2a2f3a";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.ellipse(cx, cy, radius, radius, 0, 0, Math.PI * 2);
        ctx.fill();
        ctx.stroke();

        ctx.strokeStyle = "#141824";
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.ellipse(cx, cy, radius * 0.92, radius * 0.92, 0, 0, Math.PI * 2);
        ctx.stroke();

        drawGraticule(ctx, cx, cy, radius);

        const projections = {};
        const nodesFront = [];
        const nodesBack = [];
        let selectedPoint = null;

        for (const [recordId, [lat, lon]] of Object.entries(coords)) {
            const [x, y, z] = projectPoint(lat, lon);
            projections[recordId] = [x, y, z];
            if (recordId === selectedId) {
                selectedPoint = [recordId, x, y, z];
            } else if (z > 0) {
                nodesFront.push([recordId, x, y, z]);
            } else {
                nodesBack.push([recordId, x, y, z]);
            }
        }

        ctx.fillStyle = "#2b303b";
        for (const [recordId, x, y, z] of nodesBack) {
            const px = cx + x * radius;
            const py = cy - y * radius;
            ctx.beginPath();
            ctx.ellipse(px, py, 3, 3, 0, 0, Math.PI * 2);
            ctx.fill();
        }

        for (const [sourceId, record] of Object.entries(records)) {
            const edges = record.edges || [];
            if (!edges.length) {
                continue;
            }
            const sourceProj = projections[sourceId];
            if (!sourceProj || sourceProj[2] <= 0) {
                continue;
            }
            const sxp = cx + sourceProj[0] * radius;
            const syp = cy - sourceProj[1] * radius;
            for (const edge of edges) {
                const targetId = edge.target;
                const targetProj = projections[targetId];
                if (!targetProj || targetProj[2] <= 0) {
                    continue;
                }
                const txp = cx + targetProj[0] * radius;
                const typ = cy - targetProj[1] * radius;
                const isSelected = sourceId === selectedId || targetId === selectedId;
                ctx.strokeStyle = isSelected ? "#7cc7ff" : "#2a3a4d";
                ctx.lineWidth = isSelected ? 2 : 1;
                ctx.beginPath();
                ctx.moveTo(sxp, syp);
                ctx.lineTo(txp, typ);
                ctx.stroke();
            }
        }

        const drawNode = (recordId, x, y, z, isSelected) => {
            const px = cx + x * radius;
            const py = cy - y * radius;
            const record = records[recordId] || {};
            const imageRef = record.cardImage;
            const img = imageRef ? getImage(imageRef) : null;
            if (img && img.complete && img.naturalWidth) {
                let scale = BASE_SCALE;
                if (isSelected) {
                    const t = Math.max(0, Math.min(1, (z + 1) / 2));
                    const tExp = Math.pow(t, SELECT_SCALE_EXP);
                    const maxDim = Math.max(img.naturalWidth, img.naturalHeight);
                    const targetPixels = Math.max(height * 0.8, 1);
                    let targetScale = maxDim > 0 ? targetPixels / maxDim : BASE_SCALE;
                    if (targetScale < BASE_SCALE) {
                        targetScale = BASE_SCALE;
                    }
                    scale = BASE_SCALE + (targetScale - BASE_SCALE) * tExp;
                }

                const maxDim = Math.max(img.naturalWidth, img.naturalHeight);
                const maxAllowed = radius * 1.9;
                if (maxDim > 0) {
                    scale = Math.min(scale, maxAllowed / maxDim);
                }
                const drawW = img.naturalWidth * scale;
                const drawH = img.naturalHeight * scale;
                ctx.drawImage(img, px - drawW / 2, py - drawH / 2, drawW, drawH);
                globeItems.push({
                    id: recordId,
                    x: px,
                    y: py,
                    r: Math.max(drawW, drawH) / 2,
                    z,
                    isSelected
                });
            } else {
                const size = isSelected ? 7 : 5;
                ctx.fillStyle = isSelected ? "#ffd166" : "#7cc7ff";
                ctx.strokeStyle = isSelected ? "#f4a261" : "#0b0b10";
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.ellipse(px, py, size, size, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                globeItems.push({ id: recordId, x: px, y: py, r: size + 2, z, isSelected });
            }

            if (isSelected) {
                const label = records[recordId]?.title || recordId;
                const now = Date.now();
                let scale = 1;
                if (now < labelScaleUntil && labelScaleUntil > labelScaleStart) {
                    const t = (now - labelScaleStart) / (labelScaleUntil - labelScaleStart);
                    const eased = t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
                    scale = 1 + 9 * eased;
                }
                ctx.fillStyle = "#ff2e2e";
                ctx.shadowColor = "rgba(255, 64, 64, 0.9)";
                ctx.shadowBlur = 18;
                ctx.shadowOffsetX = 0;
                ctx.shadowOffsetY = 0;
                ctx.font = `bold ${Math.round(10 * scale)}px Segoe UI`;
                ctx.textAlign = "center";
                ctx.textBaseline = "bottom";
                ctx.fillText(label, px, py - 8);
                ctx.shadowColor = "transparent";
                ctx.shadowBlur = 0;
            }
        };

        for (const [recordId, x, y, z] of nodesFront) {
            drawNode(recordId, x, y, z, false);
        }

        if (selectedPoint) {
            const [recordId, x, y, z] = selectedPoint;
            drawNode(recordId, x, y, z, true);
        }
    };

    const clampLat = (lat) => {
        return Math.max(-DRAG_LAT_LIMIT, Math.min(DRAG_LAT_LIMIT, lat));
    };

    const startDrag = (event) => {
        if (event.pointerType === "mouse" && event.button !== 0) {
            return;
        }
        userInteracted = true;
        dragActive = false;
        dragPointerId = event.pointerId;
        dragStartX = event.clientX;
        dragStartY = event.clientY;
        dragLastX = event.clientX;
        dragLastY = event.clientY;
        dragStartedAt = Date.now();
        globeCanvas.setPointerCapture(event.pointerId);
        cancelCycle();
    };

    const moveDrag = (event) => {
        if (dragPointerId === null || event.pointerId !== dragPointerId) {
            return;
        }
        const dxTotal = event.clientX - dragStartX;
        const dyTotal = event.clientY - dragStartY;
        if (!dragActive) {
            if (Math.hypot(dxTotal, dyTotal) < DRAG_THRESHOLD) {
                return;
            }
            dragActive = true;
        }
        const dx = event.clientX - dragLastX;
        const dy = event.clientY - dragLastY;
        dragLastX = event.clientX;
        dragLastY = event.clientY;

        globeRotLon += dx * DRAG_SENSITIVITY;
        globeRotLat = clampLat(globeRotLat + dy * DRAG_SENSITIVITY);
        globeTargetLat = globeRotLat;
        globeTargetLon = globeRotLon;
        globeAnimating = false;
        renderGlobe();
    };

    const endDrag = (event) => {
        if (dragPointerId === null || event.pointerId !== dragPointerId) {
            return;
        }
        globeCanvas.releasePointerCapture(event.pointerId);
        dragPointerId = null;
        const wasDrag = dragActive;
        if (wasDrag) {
            suppressClickUntil = Date.now() + 250;
        }
        dragActive = false;
        scheduleCycleFromEvent();
    };

    globeCanvas.style.touchAction = "none";
    globeCanvas.addEventListener("pointerdown", startDrag);
    globeCanvas.addEventListener("pointermove", moveDrag);
    globeCanvas.addEventListener("pointerup", endDrag);
    globeCanvas.addEventListener("pointercancel", endDrag);
    globeCanvas.addEventListener("pointerleave", endDrag);
    globeCanvas.addEventListener(
        "wheel",
        (event) => {
            event.preventDefault();
            userInteracted = true;
            const zoomFactor = Math.exp(-event.deltaY * 0.0015);
            globeZoom = Math.max(GLOBE_ZOOM_MIN, Math.min(GLOBE_ZOOM_MAX, globeZoom * zoomFactor));
            renderGlobe();
            cancelCycle();
        },
        { passive: false }
    );

    globeCanvas.addEventListener("click", (event) => {
        if (Date.now() < suppressClickUntil) {
            return;
        }
        userInteracted = true;
        const rect = globeCanvas.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        for (const item of globeItems) {
            const dx = item.x - x;
            const dy = item.y - y;
            if (Math.hypot(dx, dy) <= item.r) {
                if (item.isSelected) {
                    const url = records[item.id]?.url;
                    if (url) {
                        window.open(url, "_blank", "noopener");
                        break;
                    }
                }
                selectRecord(item.id);
                break;
            }
        }
    });

    window.addEventListener("resize", () => {
        renderGlobe();
    });

    refreshAll();
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const faqItems = document.querySelectorAll('#faqs .col-2-3 a');

    searchInput.addEventListener('input', function() {
        const query = searchInput.value.toLowerCase();

        faqItems.forEach(item => {
            const faqText = item.getAttribute('data-faq').toLowerCase();

            if (faqText.includes(query)) {
                item.style.display = '';
            } else {
                item.style.display = 'none';
            }
        });
    });
});
</script>
<script>
        $(document).ready(function() {
            //
        });
</script>
<script>
function showFAQ(faqLink, faqId) {
    const faqAnswers = {
        'answer1': 'For the best results, you should use high-strength plastic and/or aluminum for the robot frame.',
        'answer2': 'The cost varies depending on the robot size class and parts, but basic kits can start around $300.',
        'answer3': 'The rules IRCL uses are available in the "External Links" section.',
        'answer4': 'Anyone can fight, as long as they pass the safety checks and adhere to the competition rules.',
        'answer5': 'IRCL fights take place at various venues throughout the Treasure Valley. Check our Events Calendar.',
        'answer6': 'IRCL tries to schedule fights every three months, with similar regional events taking place all the time.',
    };

    // Find the closest parent with class 'faq-item' and then find the answer container
    const faqItem = faqLink.closest('.faq-item');
    const answerContainer = faqItem.querySelector('.faq-answer');

    // Set the answer inside the appropriate container
    const answer = faqAnswers[faqId] || 'Answer not found.';
    answerContainer.innerText = answer;
}
    
</script>
</body>
</html>
